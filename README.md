# **nubceo connect** documentation

![nubceo connect](https://raw.githubusercontent.com/nubceo/nubceo-connect-doc/master/nubceo_connect_logo_1024w.png)

Here you can find technical documentation to use our **nubceo connect** REST API.

## Authentication

The authentication process uses a JWT token that you should request prior to using any of the secured endpoints, by providing your **API Key** and **API Secret**.

### Authentication Flow
  
1. Request the JWT by using the credentials with the `/authenticate` endpoint.  
   Request:
   ```
   POST https://connectapi.nubceo.com/authenticate
   ```
   Request body:
   ```json
   {
     "API_KEY": "xxxxxx",
     "API_SECRET": "xxxxxx"
   }
   ```
2. Get and save the JWT token  
   Keep in mind that the JWT token expires in 1 hour after issuance. You will need to request a new one to continue using the API.
3. Include the JWT token in the `Authorization` HTTP header on each request.
   The HTTP Header to use is `Authorization` with the Bearer token authentication scheme.  
   Example:  
   `Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6...`

### Errors

These are the possible errores the authentication endpoint can throw:

| HTTP Status Code  | Name  | Description  |
| ------------- | ------------- | ------------- |
| 400  | Invalid request | The request body has invalid or incomplete data. |
| 401  | INVALID_CREDENTIALS | The API Key and/or API Secret is invalid or nonexistent. |

## API reference

Swagger API reference with list of available endpoints:  
https://connectapi.nubceo.com/v1/documentation/static/index.html

### Response structure

All responses from the API share the same base structure:
```jsonc
{
  "status": 200, // status of the response
  "meta": {  // meta data about the content
    "count": 1, // returned items count
    "total": 1  // total items available (useful in case of lists, when the quantity returned is paginated)
  },
  "data": ... // data requested, which could be an object or an array depending on the endpoint
}
```

### Filters

All endpoints that query for a list of objects have the capability to be filtered. The filters should be passed as GET query params in the following format:
```
?filter[fieldName][operator]=value
```
Being:
- `fieldName` the field to filter by
- `operator` one of the supported operators (see below)
- `value` the value to filter by

Current available operators:
- `eq`: 1 == 1
- `ne`: 1 != 1
- `is`: 1 is 1
- `not`: 1 is not 1
- `or`: 1 or 1
- `gt`: 1 > 1
- `gte`: 1 >= 1
- `lt`: 1 < 1
- `lte`: 1 <= 1
- `between`: 1 between [1]
- `notBetween`: 1 not between [1]
- `in`: 1 in (1)
- `notIn`: 1 not in (1)
- `like`: 1 like '%1%'
- `notLike`: 1 not like '%1%'

Examples:
- `?filter[name][like]=%nubceo%`
- `?filter[platformExternalCode][eq]=card_processor`
- `?filter[id][in]=[1,2]`
- `?filter[date][gte]=2022-02-18T00:00:00`

## Model

**nubceo cash** structure the data around few main models, which are referenced in the API endpoints.

### Tenant

The account in **nubceo cash**. It represents the entire business being managed with nubceo. A business can be comprised of one or more companies (legal entities).  
If you are using this API to access the data in your account, you should know what is your Tenant ID.

### Company

A specific legal entity, which is part of a Tenant. It will have, among other fields, the corresponding tax ID of the country.

### Platform External / Platform External Credential

The External Platform is one of the different entities that serve as source of data. For example, a payment processor or an ERP system.

The Credential for a External Platform holds the data for the actual link or integration that allows **nubceo cash** to collect the data.

### Sale

The individual transaction made by the end consumer.

### Settlement

The settlement generated by the entity that process the payment, in which several sales are included, that will eventually be paid to the company. All taxes and deductions are included in this settlement.

### Collection

This is the actual payment a specific External Platform (payment processing entity) makes to the business. This affects the cashflow directly.



## Requesting access

If you want to get your credentials to use **nubceo connect** contact us at consultas@nubceo.com.
